import{a as e}from "./index.9052b21b.js";import{C as a,T as t}from "./TerminalOutline.5c9271c4.js";import{d as l,b as i,o,l as d,w as n,f as s,g as r,ag as u,h as p,r as m,u as f,ae as c,a9 as h,af as _,N as g,e as v,ab as y}from "./vendor.3140252b.js";import{A as w}from "./AlertCircleOutline.f0a04ba9.js";import{H as b}from "./HelpCircleOutline.8866f4f7.js";const x=l({setup(){},components:{CaretForwardIcon:a,Ternimal:t},props:{data:{},width:String,type:String},data(){return{model:this.data}},methods:{saveFormData(){let e={feature_id:this.model.feature_id,feature_name:this.model.feature_name,feature_cmd:this.model.feature_cmd,feature_url:this.model.feature_url,info:this.model.info,description:this.model.description,invoke_limit:this.model.invoke_limit,is_original:this.model.is_original,credit_cost:this.model.credit_cost};this.$axios.post("feature-info/"+this.type,e).then((e=>{e.data.msg}))}}}),k={style:{margin:"0 auto"}},C={style:{float:"left"}},z=p("保存"),U=p("源自系统"),R=p("外部插件");x.render=function(e, a, t, l, p, m){const f=i("n-image"),c=i("n-button"),h=i("n-gi"),_=i("n-input"),g=i("n-form-item"),v=i("n-input-number"),y=i("n-radio"),w=i("n-radio-group"),b=i("n-grid"),x=i("n-form"),S=i("n-card");return o(),d(S,{style:u(e.width)},{default:n((()=>[s(x,{"label-placement":"left",size:"medium","label-width":"100"},{default:n((()=>[s(b,{"x-gap":"16",cols:5},{default:n((()=>[s(h,{span:"1"},{default:n((()=>[r("div",k,[s(f,{"object-fit":"cover",round:"",src:e.model.avatar,width:"200",height:"200",style:{"border-radius":"200px"}},null,8,["src"])]),r("div",C,[s(c,{type:"primary",style:{width:"105px",height:"40px",margin:"5px 50px"},onClick:e.saveFormData},{default:n((()=>[z])),_:1},8,["onClick"])])])),_:1}),s(h,{span:"2"},{default:n((()=>[s(g,{label:"功能名称"},{default:n((()=>[s(_,{placeholder:"请输入功能名称",value:e.model.feature_name,"onUpdate:value":a[0]||(a[0]= a=>e.model.feature_name=a)},null,8,["value"])])),_:1}),s(g,{label:"调用命令"},{default:n((()=>[s(_,{placeholder:"请输入调用命令",value:e.model.feature_cmd,"onUpdate:value":a[1]||(a[1]= a=>e.model.feature_cmd=a)},null,8,["value"])])),_:1}),s(g,{label:"URL"},{default:n((()=>[s(_,{placeholder:"请输入调用URL",value:e.model.feature_url,"onUpdate:value":a[2]||(a[2]= a=>e.model.feature_url=a)},null,8,["value"])])),_:1}),s(g,{label:"CREDIT 消耗"},{default:n((()=>[s(v,{value:e.model.credit_cost,"onUpdate:value":a[3]||(a[3]= a=>e.model.credit_cost=a),size:"small"},null,8,["value"])])),_:1})])),_:1}),s(h,{span:"2"},{default:n((()=>[s(g,{label:"功能一句话"},{default:n((()=>[s(_,{placeholder:"请输入一句话",value:e.model.description,"onUpdate:value":a[4]||(a[4]= a=>e.model.description=a)},null,8,["value"])])),_:1}),s(g,{label:"详细说明"},{default:n((()=>[s(_,{placeholder:"Textarea",value:e.model.info,"onUpdate:value":a[5]||(a[5]= a=>e.model.info=a),type:"textarea",autosize:{minRows:3,maxRows:5}},null,8,["value"])])),_:1}),s(g,{label:"周期调用限制"},{default:n((()=>[s(_,{placeholder:"[周期]/[次数]",value:e.model.invoke_limit,"onUpdate:value":a[6]||(a[6]= a=>e.model.invoke_limit=a)},null,8,["value"])])),_:1}),s(g,{label:"功能类型"},{default:n((()=>[s(w,{value:e.model.is_original,"onUpdate:value":a[7]||(a[7]= a=>e.model.is_original=a)},{default:n((()=>[s(y,{value:"1"},{default:n((()=>[U])),_:1}),s(y,{value:"0"},{default:n((()=>[R])),_:1})])),_:1},8,["value"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["style"])};const S=({popMessage:a})=>[{type:"selection"},{type:"expand",renderExpand: e=>h(x,{data:e,type:"edit",hoverable:!0})},{title:"功能名称",key:"feature_name",width:200,ellipsis:!0},{title:"命令",key:"feature_cmd",width:300,ellipsis:!0},{title:"URL",key:"feature_url",width:300,ellipsis:!0},{title:"描述",key:"description",width:300,ellipsis:!0},{title:"功能来源",key:"is_original",render: e=>h(_,{type:1==e.is_original?"primary":"info"},{default:()=>1==e.is_original?"源自系统":"外部插件"})},{title:"状态",key:"isEnabled",render: t=>h(g,{circle:!0,style:"margin: 0; width: 80px",type:1==t.is_enabled?"primary":"error",ghost:1==t.is_enabled,onClick(){e.post("feature-info/switchStatus",t).then((e=>{let l=e.data.msg;t.is_enabled=-t.is_enabled,a(l,t.is_enabled)}))}},{default:()=>1==t.is_enabled?"良好":"禁用"})}],L=l({setup(){const e=m([]),a=f(),t=c({page:1,pageSize:15,showSizePicker:!0,pageSizes:[10,15,25],onChange: e=>{t.page=e},onPageSizeChange: e=>{t.pageSize=e,t.page=1}});return{showModal:m(!1),pagination:t,columns:S({popMessage(e, t){1==t?a.success(e):a.warning(e)}}),checkedRowKeys:e,handleCheck(a){e.value=a}}},data:()=>({dataList:[]}),mounted(){this.$axios.post("feature-info/findBy").then((e=>{this.dataList=e.data.datas}))},components:{AlertIcon:w,HelpIcon:b,FeatureCard:x},methods:{}}),j=p(" 功能信息 "),F=r("span",{style:{"font-weight":"200","font-size":"16px"}},"(Feature info)",-1),M=r("p",null,"已经注册可以管理的功能",-1),I=p("新增"),T=p("删除");L.render=function(e, a, t, l, d, u){const p=i("HelpIcon"),m=i("n-icon"),f=i("n-button"),c=i("n-popover"),h=i("n-h1"),_=i("n-divider"),g=i("n-data-table"),w=i("n-card"),b=i("FeatureCard"),x=i("n-modal");return o(),v(y,null,[r("div",null,[s(h,{prefix:"bar",style:{"font-weight":"400","font-size":"32px"}},{default:n((()=>[j,F,s(c,{trigger:"click"},{trigger:n((()=>[s(f,{text:"",style:{"font-size":"26px"}},{default:n((()=>[s(m,null,{default:n((()=>[s(p)])),_:1})])),_:1})])),default:n((()=>[M])),_:1})])),_:1})]),s(_),s(w,{title:"功能列表"},{default:n((()=>[r("div",null,[s(f,{ghost:"",type:"primary",size:"large",style:{margin:"0 10px 10px 0",width:"80px"},onClick:a[0]||(a[0]= a=>e.showModal=!0)},{default:n((()=>[I])),_:1}),s(f,{type:"error",size:"large",style:{margin:"0 10px 10px 0",width:"80px"}},{default:n((()=>[T])),_:1})]),s(g,{columns:e.columns,data:e.dataList,pagination:e.pagination,"row-key": e=>e.feature_id,"onUpdate:checkedRowKeys":e.handleCheck},null,8,["columns","data","pagination","row-key","onUpdate:checkedRowKeys"])])),_:1}),s(x,{show:e.showModal,"onUpdate:show":a[1]||(a[1]= a=>e.showModal=a)},{default:n((()=>[s(w,{style:{width:"1100px"},title:"新增功能",bordered:!1,size:"huge"},{default:n((()=>[s(b,{type:"save",data:e.dataList,width:"width: 1000px"},null,8,["data"])])),_:1})])),_:1},8,["show"])],64)};export{L as default};
